{"version":3,"file":"d-collapse.js","sourceRoot":"","sources":["../../../src/components/d-collapse/d-collapse.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n\tComponent,\n\tHost,\n\th,\n\tState,\n\tEvent,\n\tEventEmitter,\n\tProp,\n\tWatch,\n} from \"@stencil/core\";\n\nexport interface CollapseItem {\n\tid: string;\n\ttitle: string;\n\tcontent: string;\n\tdisabled?: boolean;\n}\n\n@Component({\n\ttag: \"d-collapse\",\n\tstyleUrl: \"d-collapse.css\",\n\tshadow: true,\n})\nexport class DCollapse {\n\t@Prop() items: string | CollapseItem[] = [];\n\t@Prop() accordion: boolean = false; // 手风琴模式，同时只能展开一个\n\t@Prop() defaultActiveKeys: string | string[] = []; // 默认展开的项\n\n\t@State() activeKeys: string[] = [];\n\t@State() parsedItems: CollapseItem[] = [];\n\n\t@Event() change: EventEmitter<string[]>;\n\n\tcomponentWillLoad() {\n\t\tthis.parseProps();\n\t}\n\n\t@Watch(\"items\")\n\t@Watch(\"defaultActiveKeys\")\n\tparseProps() {\n\t\t// 解析items属性\n\t\tif (typeof this.items === \"string\") {\n\t\t\ttry {\n\t\t\t\tthis.parsedItems = JSON.parse(this.items);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to parse items:\", e);\n\t\t\t\tthis.parsedItems = [];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.parsedItems = this.items || [];\n\t\t}\n\n\t\t// 解析defaultActiveKeys属性\n\t\tif (typeof this.defaultActiveKeys === \"string\") {\n\t\t\ttry {\n\t\t\t\tthis.activeKeys = JSON.parse(this.defaultActiveKeys);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Failed to parse defaultActiveKeys:\", e);\n\t\t\t\tthis.activeKeys = [];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.activeKeys = [...(this.defaultActiveKeys || [])];\n\t\t}\n\t}\n\n\tprivate toggleItem = (itemId: string) => {\n\t\tif (this.parsedItems.find((item) => item.id === itemId)?.disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newActiveKeys = [...this.activeKeys];\n\t\tconst index = newActiveKeys.indexOf(itemId);\n\n\t\tif (index > -1) {\n\t\t\t// 收起项\n\t\t\tnewActiveKeys.splice(index, 1);\n\t\t} else {\n\t\t\t// 展开项\n\t\t\tif (this.accordion) {\n\t\t\t\t// 手风琴模式，先清空所有激活项\n\t\t\t\tnewActiveKeys.length = 0;\n\t\t\t}\n\t\t\tnewActiveKeys.push(itemId);\n\t\t}\n\n\t\tthis.activeKeys = newActiveKeys;\n\t\tthis.change.emit(newActiveKeys);\n\t};\n\n\tprivate isItemActive = (itemId: string): boolean => {\n\t\treturn this.activeKeys.includes(itemId);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Host>\n\t\t\t\t<div class=\"d-collapse\">\n\t\t\t\t\t{this.parsedItems.map((item) => (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass={`d-collapse-item ${\n\t\t\t\t\t\t\t\tthis.isItemActive(item.id) ? \"active\" : \"\"\n\t\t\t\t\t\t\t} ${item.disabled ? \"disabled\" : \"\"}`}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"d-collapse-header\"\n\t\t\t\t\t\t\t\tonClick={() => this.toggleItem(item.id)}>\n\t\t\t\t\t\t\t\t<span class=\"d-collapse-title\">{item.title}</span>\n\t\t\t\t\t\t\t\t<span class=\"d-collapse-arrow\">\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\twidth=\"16\"\n\t\t\t\t\t\t\t\t\t\theight=\"16\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\">\n\t\t\t\t\t\t\t\t\t\t<path d=\"M8 11L3 6h10l-5 5z\" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"d-collapse-content\">\n\t\t\t\t\t\t\t\t<div class=\"d-collapse-content-inner\">{item.content}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<slot></slot>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"]}